<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:SigStatCompare"
             xmlns:views="clr-namespace:SigStatCompare.Views"
             xmlns:viewmodels="clr-namespace:SigStatCompare.ViewModels"
             x:Class="SigStatCompare.Views.DeepSignDBPage"
             Title="{OnIdiom Default='DeepSignDBPage', Desktop=''}">
    <ContentPage.BindingContext>
        <viewmodels:DeepSignDBViewModel/>
    </ContentPage.BindingContext>

    <ContentPage.Resources>
        <views:TupleToStringConverter x:Key="tupleToString" />
    </ContentPage.Resources>
    
    <ContentPage.MenuBarItems>
        <MenuBarItem Text="File">
            <MenuFlyoutItem Text="Load" Clicked="LoadDeepSignDB"/>
        </MenuBarItem>
    </ContentPage.MenuBarItems>

    <VerticalStackLayout Margin="8">
        <Label Text="{Binding SignatureCount, StringFormat='Loaded {0} signatures'}"/>
        <Picker Title="DB"
                ItemsSource="{Binding DBCategories}"
                SelectedItem="{Binding SelectedDBCategory}"
                ItemDisplayBinding="{Binding Name}"/>
        <Picker Title="InputDevice"
                ItemsSource="{Binding InputDeviceCategories}"
                SelectedItem="{Binding SelectedInputDeviceCategory}"
                ItemDisplayBinding="{Binding Name}"/>
        <Picker Title="Split"
                ItemsSource="{Binding SplitCategories}"
                SelectedItem="{Binding SelectedSplitCategory}"
                ItemDisplayBinding="{Binding Name}"/>
        <Label Text="{Binding MatchingSignerCount, StringFormat='{0} matching signers'}"/>
        <Label Text="{Binding MatchingSignaturesPerSigner, StringFormat='Signatures per signer: {0}', Converter={StaticResource tupleToString}}"/>
    </VerticalStackLayout>
</ContentPage>
